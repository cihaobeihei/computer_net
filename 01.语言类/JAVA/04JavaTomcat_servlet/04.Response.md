# Response

## 1.简介
我们使用Servlet实现服务器小程序是会使用模板类，类名由我们自己设置，但该类会继承HttpServlet类，并且有doGet和doPost两个重要的方法，该方法有两个参数分别是response和request分别代表响应和请求。<br>
我们通过改写doGet和doPost方法来响应用户网页的get和post提交方法，并使用response和request来支持不同功能的实现。<br>

## 2.Response功能
response可以更改发送给客户的响应行、响应头和响应体。<br>

### 1.设置响应行
HTTP响应行有 标识码，比如200代表OK。我们可以调用response的方法来设置响应行。<br>
```java
void javax.servlet.http.HttpServletResponse.setStatus(int sc);

response.setStatus(302);
```
通常来说，我们自行更改响应行的情况不多，一般是由默认来设置。<br>

### 2.设置响应头
我们可以使用response.setHeader(String name, String value)方法，在响应头中添加键值对。<br>
```java
public class ServletDemo extends HttpServlet {
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		//response.setStatus(404);
		response.setHeader("name", "noble");
}
```

### 2.2上述方法综合使用
结合response可以改变响应行和响应头，有一种常见的需求是在网站添加跳转页面。<br>
将响应行改为302，在响应头添加Location字段。如下：<br>

```java
public class ServletDemo extends HttpServlet {
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		response.setStatus(302);
		response.setHeader("Location","WEB02/servlet2");
}
```

有一种分装发放也可以实现相同的功能：<br>
```java
public class ServletDemo extends HttpServlet {
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		response.sendRedirect("/WEB02/servrlet2");
}
```

我们也可以设置定时刷新：<br>
```java
response.setHeader("refresh","5;url=http://etiantian.org");
```
上述代码中的5表示5秒。<br>

### 2.3response字符集问题
我们可以通过response.getWriter()方法获得在客户端输出流PrintWriter。<br>
```java
PrintWriter writer = resonse.getWriter();
```
我们可以使用该PrintWrite向浏览器输出内容，但我们很快会发现，它输出中文时乱码。原因是Servlet向response存储内容时使用iso编码表，而浏览器默认使用本地编码表(通常是GBK)。<br>
我们可以通过以下代码解决该问题：<br>
```java
response.setCharacterEncoding("UTF-8")//告知Servlet使用UTF-8存储
response.setHeader("Content-Type","text/html;charset=UTF-8");//告知浏览器使用UTF-8解析
```
我们也可以使用封装代码一条语句解决这个问题：<br>
```java
response.setContenType("text/html;charset=UTF-8");
```




















#
