# jQueryDOM操作

## 1.元素节点的创建
常见的就是直接把这个节点的结构给通过HTML标记字符串描述出来，通过$()函数处理<br>
```js
$("<div></div>")
```

一个简单的实例:<br>
```html
<body>
    <script>
    var a = $("<div>hey</div>");
    $("body").append(a);
    </script>
</body>
```

## 2.插入元素

### 2.1.append()和appendTo()
创建好的元素需要添加到html中,这就需要两个函数:``append()``和``appendTo()``<br>
```
append：这个操作与对指定的元素执行原生的appendChild方法，将它们添加到文档中的情况类似。

appendTo：实际上，使用这个方法是颠倒了常规的$(A).append(B)的操作，即不是把B追加到A中，而是把A追加到B中。
```
<div style="color:red;">.append()和.appendTo()两种方法功能相同，主要的不同是语法——内容和目标的位置不同</div><br>
实例:<br>

```js
$("div").append("<div>HelloWorld</div>");
```


### 2.2.before()和after()
- before与after都是用来对相对选中元素外部增加相邻的兄弟节点
- 2个方法都是都可以接收HTML字符串，DOM 元素，元素数组，或者jQuery对象，用来插入到集合中每个匹配元素的前面或者后面
- 2个方法都支持多个参数传递after(div1,div2,....)
```js
$("div").before("<p>HelloWorld</p>");
```

### 2.3.prepend()与prependTo()
![fail](img/2.1.PNG)<br>

```js
$("div").prepend("<p>HelloWorld</p>");
```

## 3.删除操作

### 3.1.empty()
empty 顾名思义，清空方法，但是与删除又有点不一样，因为它只移除了 指定元素中的所有子节点。<br>
这个方法不仅移除子元素（和其他后代元素），同样移除元素里的文本。因为，根据说明，元素里任何文本字符串都被看做是该元素的子节点。请看下面的HTML<br>
```html
<div class="hello"><p>慕课网</p></div>
```
如果我们通过empty方法移除里面div的所有元素，它只是清空内部的html代码，但是标记仍然留在DOM中<br>
```html
//通过empty处理
$('.hello').empty()

//结果：<p>慕课网</p>被移除
<div class="hello"></div>
```

### 3.2.remove()
remove与empty一样，都是移除元素的方法，但是remove会将元素自身移除，同时也会移除元素内部的一切，包括绑定的事件及与该元素相关的jQuery数据。<br>
例如一段节点，绑定点击事件<br>
```html
<div class="hello"><p>慕课网</p></div>
$('.hello').on("click",fn)
```

如果不通过remove方法删除这个节点其实也很简单，但是同时需要把事件给销毁掉，这里是为了防止"内存泄漏"，所以前端开发者一定要注意，绑了多少事件，不用的时候一定要记得销毁<br>

通过remove方法移除div及其内部所有元素，remove内部会自动操作事件销毁方法，所以使用使用起来非常简单<br>
```js
//通过remove处理
$('.hello').remove()
//结果：<div class="hello"><p>慕课网</p></div> 全部被移除
//节点不存在了,同事事件也会被销毁
```

## 4.复制
### 4.1.clone()
clone方法比较简单就是克隆节点，但是需要注意，如果节点有事件或者数据之类的其他处理，我们需要通过clone(ture)传递一个布尔值ture用来指定，这样不仅仅只是克隆单纯的节点结构，还要把附带的事件与数据给一并克隆了<br>

#### 实例:
```html
HTML部分
<div></div>
```

```js
JavaScript部分
$("div").on('click', function() {//执行操作})
```

```js
//clone处理一
$("div").clone()   //只克隆了结构，事件丢失

//clone处理二
$("div").clone(true) //结构、事件与数据都克隆
```

#### 注意:
- 1.clone()方法时，在将它插入到文档之前，我们可以修改克隆后的元素或者元素内容，如右边代码我 $(this).clone().css('color','red') 增加了一个颜色
- 2.通过传递true，将所有绑定在原始元素上的事件处理函数复制到克隆元素上
- 3.clone()方法是jQuery扩展的，只能处理通过jQuery绑定的事件与数据
- 4.元素数据（data）内对象和数组不会被复制，将继续被克隆元素和原始元素共享。深复制的所有数据，需要手动复制每一个

### 4.2.replaceWith()和replaceAll()

#### 4.2.1.replaceWith( newContent )
用提供的内容替换集合中所有匹配的元素并且返回被删除元素的集合<br>
简单来说：用$()选择节点A，调用replaceWith方法，传入一个新的内容B（HTML字符串，DOM元素，或者jQuery对象）用来替换选中的节点A<br>

**看个简单的例子：一段HTML代码**<br>
```html
<div>
    <p>第一段</p>
    <p>第二段</p>
    <p>第三段</p>
</div>
```
替换第二段的节点与内容<br>
```js
$("p:eq(1)").replaceWith('<a style="color:red">替换第二段的内容</a>')
```
通过jQuery筛选出第二个p元素，调用replaceWith进行替换，结果如下<br>
```html
<div>
    <p>第一段</p>
    <a style="color:red">替换第二段的内容</a>'
    <p>第三段</p>
</div>
```

#### 4.2.2.replaceAll( target )
用集合的匹配元素替换每个目标元素<br>
.replaceAll()和.replaceWith()功能类似，但是目标和源相反，用上述的HTML结构，我们用replaceAll处理<br>
```js
$('<a style="color:red">替换第二段的内容</a>').replaceAll('p:eq(1)')
```
- 1..replaceAll()和.replaceWith()功能类似，主要是目标和源的位置区别
- 2..replaceWith()与.replaceAll() 方法会删除与节点相关联的所有数据和事件处理程序
- 3..replaceWith()方法，和大部分其他jQuery方法一样，返回jQuery对象，所以可以和其他方法链接使用
- 4..replaceWith()方法返回的jQuery对象引用的是替换前的节点，而不是通过replaceWith/replaceAll方法替换后的节点

### 4.3.DOM包裹wrap()方法
如果要将元素用其他元素包裹起来，也就是给它增加一个父元素，针对这样的处理，JQuery提供了一个wrap方法<br>
.wrap( wrappingElement )：在集合中匹配的每个元素周围包裹一个HTML结构<br>
#### 简单的看一段代码：
```html
<p>p元素</p>
```
给p元素增加一个div包裹<br>
```js
$('p').wrap('<div></div>')
```
最后的结构，p元素增加了一个父div的结构<br>
```html
<div>
    <p>p元素</p>
</div>
```

另一种写法:<br>
```js
$('p').wrap(function() {
    return '<div></div>';   //与第一种类似，只是写法不一样
})
```

### 4.4.unwrap()方法
我们可以通过wrap方法给选中元素增加一个包裹的父元素。相反，如果删除选中元素的父元素要如何处理 ?<br>

jQuery提供了一个unwrap()方法 ，作用与wrap方法是相反的。将匹配元素集合的父级元素删除，保留自身（和兄弟元素，如果存在）在原来的位置。<br>

#### 看一段简单案例：
```html
<div>
    <p>p元素</p>
</div>
```
我要删除这段代码中的div，一般常规的方法会直接通过remove或者empty方法<br>
```js
$('div').remove();
```

但是如果我还要保留内部元素p，这样就意味着需要多做很多处理，步骤相对要麻烦很多，为了更便捷，jQuery提供了unwrap方法很方便的处理了这个问题<br>
```js
$('p').unwrap();
```
找到p元素，然后调用unwrap方法，这样只会删除父辈div元素了<br>

结果：<br>
```html
<p>p元素</p>
```

### 4.5.wrapAll()方法
wrap是针对单个dom元素处理，如果要将集合中的元素用其他元素包裹起来，也就是给他们增加一个父元素，针对这样的处理，JQuery提供了一个wrapAll方法<br>
.wrapAll( wrappingElement )：给集合中匹配的元素增加一个外面包裹HTML结构<br>
简单的看一段代码：<br>
```html
<p>p元素</p>
<p>p元素</p>
```
给所有p元素增加一个div包裹<br>
```js
$('p').wrapAll('<div></div>')
```
最后的结构，2个P元素都增加了一个父div的结构<br>
```html
<div>
    <p>p元素</p>
    <p>p元素</p>
</div>
```

另一种写法:<br>
```js
$('p').wrapAll(function() {
    return '<div><div/>'; 
})
```

### 4.6.wrapInner()方法
如果要将合集中的元素内部所有的子元素用其他元素包裹起来，并当作指定元素的子元素，针对这样的处理，JQuery提供了一个wrapInner方法<br>
.wrapInner( wrappingElement )：给集合中匹配的元素的内部，增加包裹的HTML结构<br>
听起来有点绕，可以用个简单的例子描述下，简单的看一段代码:<br>
```html
<div>p元素</div>
<div>p元素</div>
```
给所有元素增加一个p包裹<br>
```js
$('div').wrapInner('<p></p>')
```
最后的结构，匹配的di元素的内部元素被p给包裹了<br>
```html
<div>
    <p>p元素</p>
</div>
<div>
    <p>p元素</p>
</div>
```

## 5.jQuery遍历

### 5.1.children()方法
jQuery是一个合集对象，如果想快速查找合集里面的第一级子元素，此时可以用children()方法。这里需要注意：.children(selector) 方法是返回匹配元素集合中每个元素的所有子元素（仅儿子辈，这里可以理解为就是父亲-儿子的关系）<br>

**理解节点查找关系：**<br>
```html
<div class="div">
    <ul class="son">
        <li class="grandson">1</li>
    </ul>
</div>
```
代码如果是$("div").children()，那么意味着只能找到ul，因为div与ul是父子关系，li与div是祖辈关系，因此无法找到。<br>


### 5.2.find()方法
jQuery是一个合集对象，如果想快速查找DOM树中的这些元素的后代元素，此时可以用find()方法，这也是开发使用频率很高的方法。这里要注意 children与find方法的区别，children是父子关系查找，find是后代关系（包含父子关系）<br>
**理解节点查找关系：**<br>
```html
<div class="div">
    <ul class="son">
        <li class="grandson">1</li>
    </ul>
</div>
```

**查找li元素**:<br>
```js
$("div").find("li")
```
代码如果是$("div").find("li")，此时，li与div是祖辈关系，通过find方法就可以快速的查找到了。<br>

#### .find()方法要注意的知识点：
- 1.find是遍历当前元素集合中每个元素的后代。只要符合，不管是儿子辈，孙子辈都可以。
- 2.与其他的树遍历方法不同，选择器表达式对于 .find() 是必需的参数。如果我们需要实现对所有后代元素的取回，可以传递通配选择器 '*'。
- 3.find只在后代中遍历，不包括自己。
- 4.选择器 context 是由 .find() 方法实现的；因此，$('.item-ii').find('li') 等价于 $('li', '.item-ii')(找到类名为item-ii的标签下的li标签)。

### 5.3.parent()方法
jQuery是一个合集对象，如果想快速查找合集里面的每一个元素的父元素（这里可以理解为就是父亲-儿子的关系），此时可以用parent()方法<br>

<div style="color: red;"><p>因为是父元素，这个方法只会向上查找一级</p></div><br>

```html
<div class="div">
    <ul class="son">
        <li class="grandson">1</li>
    </ul>
</div>
```

查找ul的父元素``div,$(ul).parent()``，就是这样简单的表达<br>

<div style="color: red;"><p>注意：jQuery是一个合集对象，所以通过parent是匹配合集中每一个元素的父元素</p></div><br>

### 5.4.closest()方法
以选定的元素为中心，往内查找可以通过find、children方法。如果往上查找，也就是查找当前元素的父辈祖辈元素，jQuery提供了closest()方法，这个方法类似parents但是又有一些细微的区别，属于使用频率很高的方法<br>

**closest()方法接受一个匹配元素的选择器字符串**<br>
从元素本身开始，在DOM 树上逐级向上级元素匹配，并返回最先匹配的祖先元素<br>
例如：在div元素中，往上查找所有的li元素，可以这样表达:<br>

```js
$("div").closet("li')
```