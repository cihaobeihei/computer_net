# Junit和反射技术

## Junit
Junit是常说的测试单元，对于一个类中的方法，使用第三方库Junit来替代原先main函数的测试。<br>

## 反射
### 1.反射的概念

通过从配置文件读取被实例化类的名字和字段，并将字段赋值给实例化的类。<br>

### 2.获得实例的反射方法
#### 1.无参构造
获得实例的方法：<br>
- 1.获得类``Class.forName("<类的全名>");``
- 2.获得构造方法(在无参构造中，可以省略这一步)``getConstructor();``
- 3.创建实例化对象``newInstance();``

实例如下：<br>
```java
public void demo02() throws Exception {
  Class clazz2 = Class.forName("com.mystring01.Method"); //获得类
  Constructor cons = clazz2.getConstructor();            //获得该类的构造(其实是确定形参)
  Object obj = cons.newInstance();                       //实例化该类
}

或

public void demo02() throws Exception {//省略 获得该类的构造(其实是确定形参)
  Class clazz2 = Class.forName("com.mystring01.Method");
  Object obj = clazz2.newInstance();
}
```

#### 2.有参构造
获得实例的方法：<br>
- 1.获得类``Class.forName("<类的全名>");``
- 2.获得构造方法``getConstructor();``
- 3.创建实例化对象``newInstance();``

实例：<br>
```java
public void demo03() throws Exception {
  Class clazz3 = Class.forName("com.mystring01.Method");              //获得类
  Constructor con = clazz3.getConstructor(String.class, int.class);   //获得该类的构造(其实是确定形参)
  Object obj = con.newInstance("noble",21);                           //实例化该类
}
```

#### 3.私有构造
在开发中，私有构造一般是不能访问的，所以使用反射技术实现的实例化了解即可，在实际开发中一般不要用。<br>
```java
public void demo03() throws Exception {
  Class clazz3 = Class.forName("com.mystring01.Method");
  //Constructor con = clazz3.getConstructor(String.class, int.class);
  Constructor con = clazz3.getDeclaredConstructor(String.class, int.class);

  //告知jvm，允许实例化私有构造(默认不允许)
  con.setAccessible(true);

  Object obj = con.newInstance("noble",21);
}
```

#### 4.反射技术调用public方法
```java
public void demo04() throws Exception {
  //获得类
  Class clazz = Class.forName("com.mystring01.Method");

  //无参实例化
  Object obj = clazz.newInstance();

  //获得类的方法
  Method method = clazz.getMethod("setSname", String.class);

  //方法调用
  method.invoke(obj, "noble");

  //获得类的方法
  Method getMethod = clazz.getMethod("getSname");

  //方法调用，并接受返回值
  String str = (String)getMethod.invoke(obj);

  System.out.println(str);
}
```

#### 5.反射技术调用main方法
```java
public void demo05() throws Exception {
  Class clazz = Class.forName("com.mystring01.Method");
  Method method = clazz.getMethod("main", String[].class);

  String[] args = {"abc","123","obj"};

  // ** 方式1：将 String[]转换成Object,可变参数将不处理数组
  method.invoke(null, (Object)args);
  // ** 方法2：将提供二维数组，args将作为二维数组的第一个数。
  method.invoke(null, new Object[] {args});

}
```

#### 6.反射技术获取public字段
开发中用的不多。<br>
```java
public void demo01() throws Exception{
  //1 获得实例对象
  Class clazz = Class.forName("com.itheima_01_bean.Bean");
  Object obj = clazz.newInstance();

  //2 给字段赋值
  Field field = clazz.getField("description");
  field.set(obj, "描述");

  //3 获得字段值
  String str = (String) field.get(obj);
  System.out.println(str);
}
```

#### 7.反射技术获取private字段
基本上时不会用的。<br>
```java
public void demo02() throws Exception{
  Class clazz = Class.forName("com.itheima_01_bean.Bean");
  Object obj = clazz.newInstance();

  //2 获得声明的字段(私有)
  // * clazz.getField(name)   获得公共字段
  // * clazz.getDeclaredField(name) 获得声明字段(含私有)
  Field field = clazz.getDeclaredField("className");

  //3 设置运行访问私有（暴力）
  field.setAccessible(true);

  //4 设置数据
  field.set(obj, "名称");

  //5 获得数据
  String className = (String) field.get(obj);
  System.out.println(className);
}
```

### 3.反射的一个实际使用案例
在当前目录的``reflectDemo``下。实现了通过从配置文件读取被实例化类的名字和字段，并将字段赋值给实例化的类。<br>





































#
