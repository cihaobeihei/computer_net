# JSP技术

## 1.JSP概述
``JSP``全名是``Java Server Pages``，它是建立在Servlet规范之上的动态页面开发技术。在JSP文件中，``HTML``代码与``Java``代码共同存在，其中，HTML代码用来实现网页中静态内容的显示，``Java``代码用来实现网页中动态内容的显示。为了与传统``HTML``代码有所区别，``JSP``文件的扩展名为``.jsp``。<br>

## 2.JSP技术运行原理
当一个JSP文件第一次被请求时，``JSP``引擎(容器)把该``JSP``文件转换成为一个``Servlet``，而这个引擎本身也是一个``Servlet``。

## 3.JSP基本语法

### 1.HTML嵌入Java代码段
```html
<% java 代码(变量、方法、语句等) %>
```

### 2.JSP声明语句
```html
<%! 定义的变量或方法等 %>
```

### 3.JSP在页面做输出
```html
<%=java变量或表达式>
```

### 4.总结
- 1.<%java代码%> ----- 内部的java代码翻译到service方法内部
- 2.<%=java变量或表达式> ----- 会被翻译到service方法内部out.print();
- 3.<%!java 代码%> ----- 会被翻译到servl的成员的位置

## 4.jsp指令
jsp的指令是指导jsp翻译和运行的命令，``jsp``包括三大指令；<br>
- 1.``page``指令 ---- 属性最多的指令(在实际开发中，我们使用``eclipse``的默认设置即可)
  - 1.``language``：jsp脚本中可以嵌入的语言种类(一般都是``Java``)
  - 2.``pageEncoding``：当前jsp文件的本身编码---内部可以包含``contentType``
  - 3.``contentType``：``response.setContentType("text/html;charset=UTF-8");``
  - 4.``session``：是否``jsp``在翻译时自动创建``session``
  - 5.``import``：导入``java``的包
  - 6.``errorPage``：当前页面出错后跳转到``errorPage``指定的页面
- 2.``include``指令
  - 页面包含(静态包含)指令，可以将一个``jsp``页面包含到另一个``jsp``页面中
  - 格式:``<%@ include file="文件地址"%>``
- 3.``taglib``指令
  - 在``jsp``页面中引入标签库
  - 格式：``<%@ taglib uri="标签库地址" pretix="前缀"%>``

## 5.jsp内置/隐式对象(9个)
jsp被翻译成servlet之后，service方法中有9个对象定义并初始化完毕，我们在jsp脚本中可以直接使用这9个对象。<br>

| 名称 | 类型 | 描述 |
|-----|------|------|
| out  | javax.servlet.jsp.JspWriter  | 用于页面输出  |
| request  | javax.servlet.http.HttpServletRequest  | 得到用户请求信息  |
| response  | javax.servlet.http.HttpServletResponse  | 服务器向客户端的回应信息  |
| config  | javax.servlet.ServletConfig  | 服务器配置，可以取得初始化参数  |
| session  | javax.servlet.http.HttpSession  | 用来保护用户的信息  |
| applicati  | javax.servlet.ServletContext  | 所有用户的共享信息  |
| page  | java.lang.Object  | 指当前页面转换后的Servlet类的实例  |
| pageContext  | javax.servlet.jsp.PageContext  | JSP的页面容器  |
| exception  | java.lang.Throwable  | 表示JSP页面所发生的异常，在错误页面中才起作用  |

### 1.out对象
- 1.out的类型：JspWriter
- 2.out作用就是向客户端输出内容-----out.write()
- 3.out缓冲区默认8kb 可以设置成0(通过指令page 的buffer设置) 代表关闭out缓冲区 内容知道写到respons缓冲区

### 2.pageContext对象
#### 1.作为域对象
pageContext是一个域对象，但它同时可以向其他域对象中存储数据：<br>
```java
pageContext.setAttribute(String name, Object obj);
pageContext.getAttribute(String name);
pagecontext.removeAttrbute(String name);

pageContext.setAttribute(String name, Object obj, int scope);
pageContext.getAttribute(String name, int scope);
pagecontext.removeAttrbute(String name, int scope);
```

```java
pageContext.setAttribute("name","noble",PageContext.REQUEST_SCOPE);
pageContext.setAttribute("name","alex",PageContext.SESSION_SCOPE);
pageContext.setAttribute("name","haila",PageContext.APPLICATION_SCOPE);
```

#### 2.获得其他隐式对象
例如：<br>
```java
pageContext.getRequest();
```

## 6.JSP标签
### 1.JSP包含标签
```jsp
<jsp:include page="/include2.jsp"></jsp:include>
```

### 2.JSP转发标签
```jsp
<jsp:forward page="/forward2.jsp"></jsp:forward>
```








#
