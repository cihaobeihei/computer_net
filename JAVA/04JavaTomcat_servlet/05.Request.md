# Request常用API

我们可以使用Request类的方法获得用户请求行、请求头、请求体中的信息。<br>

## 1.获得请求行的信息
```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
	String mythod = request.getMethod();
	String requestURI = request.getRequestURI();
	StringBuffer requestURL = request.getRequestURL();
	String contextPath = request.getContextPath();
	String queryString = request.getQueryString();

	System.out.println("Method: "+mythod);
	System.out.println("uri: "+requestURI);
	System.out.println("url: "+requestURL);
	System.out.println("ContextPath: "+contextPath);
	System.out.println("queryString: "+queryString);
}
```

输出结果：<br>
```
Method: GET
uri: /WEB02/request
url: http://localhost:8080/WEB02/request
ContextPath: /WEB02
queryString: username=noble&password=adfa
```


### 1.获得请求方法
```java
String request.getMethod();
```
一般来说返回的是``GET``或``POST``字符串。<br>

### 2.获得URI
```java
String request.getRequestURI();
```

### 3.获得URL
```java
StringBuffer request.getRequestURL();
```

### 4.获得站点根目录
```java
String request.getContextPath();
```

### 5.获得参数
```java
String request.getQueryString();
```

## 2.获得请求头的信息

### 1.获得客户端IP地址
```java
String request.getRemoteAddr();
```

### 2.获得请求头信息
```java
String request.getHeader(name);
```
``name``是请求头的``key``比如：``User-Agent``<br>

##### 通过请求头Referer来做防盗链
referer信息包含了用户访问到此页面时的上一页面地址，我们可以比较页面地址的域名来判断用户是否从合法的页面访问过来的。<br>
```java
String refer = request.getHeader("Referer");
if(refer != null && refer.startsWith("hsttp://localhost:8080")) {
response.getWriter().write("welcome!!!");
}else {
	response.getWriter().write("lail!!!");
}
```

##### 获得用户传递的参数
通过form表达获得用户的选项或输入。<br>
```java
String getParameter(String name);
String[] getParameter(String name);
Map<String,String[]> getParameterMap();
```

## 3.Request其他方法
Request其他重要方法有两个：<br>

#### 1.Request是一个域 可以存取数据
#### 2.Request有转发方法 可以将用户访问交给其他Servlet处理

### 1.Request作为一个域
每次有用户请求时，会创建Request和Response，所以Request作为域，它的生命周期就存在与这个请求周期中。<br>
```java
void request.setAttribute(String name,Object value);
Object request.getAttribute(String name);
```

### 2.Request转发方法
我们通过以下两行代码便可以实现请求转发：<br>
```java
RequestDispatcher request.getRequestDispatcher(String path);
RequestDispatcher.forward(request,response);
//path 是要转发的路径
```





















#
