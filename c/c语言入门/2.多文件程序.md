# 多文件程序设计
## 1.理解 extern 和 static
要理解两个不同的概念： __申明__ 和 __定义__<br>
声明是指：该函数或变量在其他地方定义过了。<br>
定义是指：对于一个新变量或函数赋予意义，即命名，使我们可以使用它的左值和右值。<br>
__声明是不在内存开辟空间的 定义是要在内存开辟空间的__ C程序编译过程是将整个项目的所有文件链接起来编译，所以很有可能或者说一定会发生一种情况：一个变量或函数在一个源文件定义，但是编译过程中可能先编译了某个文件的内容使用了这个变量或函数，所以我们需要在这个文件中加上声明 告诉编译器我已经在其他地方声明过这个函数或变量了。<br>
extern只有一个意思：是申明。<br>
static有两个意思，根据上下文的不同而不同。<br>
## 2.头文件(XXX.h)和源文件(xxx.c)的编写规范
头文件用于声明模块 源文件实现和定义模块<br>
以下用config.c和config.h举例<br>
头文件模板：<br>
```C
#ifndef _CONFIG_H_
#define _CONFIG_H_
.....//其他内容
#endif
```
源文件模板：<br>
```C
include "config.h"
......//其他内容
```
__以下是详细实例：__<br>
```C
//my_mem.h
#ifndef _CONFIG_H_
#define _CONFIG_H_
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<stdarg.h>
#define OUT
#define IN
extern int get_mem(IN int n_values, ...);
extern int free_mem(IN int n_values, ...);
#endif
```
```C
//my_mem.c
#include"my_mem.h"
int get_mem(IN int n_values, ...)
{
        if(n_values%2!=0)
        {
                fprintf(stderr,"error: number of values error!");
                return -1;
        }

        va_list var_arg;
        va_start(var_arg,n_values);

        for(;n_values>0;n_values-=2){
                char *p1=NULL;//pointer to memory space
                int len1=0;   //the lenth of space
                //read paraments that record size
                len1=va_arg(var_arg,int);
                //create memory spaces
                p1=(char*)malloc(len1);
                if(p1==NULL)
                {
                        fprintf(stderr,"error: malloc error!\n");
                        return -1;
                }
                memset(p1,0,len1);//memory create over
                *(va_arg(var_arg,char**))=p1;
                //from now the function create space successful
        }
        va_end(var_arg);
        return 0;
}
int free_mem(IN int n_values, ...)
{
        va_list var_arg;
        va_start(var_arg,n_values);

        for(;n_values>0;n_values--){
                char *p=NULL;//the point that will be free
                p=va_arg(var_arg,char*);//assign p variable
                if(p==NULL)
                {
                        fprintf(stderr,"error: pointer is NULL!\n");
                        return -1;
                }
                free(p);
        }

        va_end(var_arg);
        return 0;
}
```


## 3.makefile的设计
